<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="main">
	<update id="changeProfile">
		update member set member_profileimg =
		#{member_profileimg} where member_id = #{member_id}
	</update>
	<select id="check" resultType="cloud.member.MemberVO">
		select * from member where
		member_id = #{member_id}
	</select>
	<select id="viewpager" resultType="cloud.member.MemberVO">
		SELECT M.*
		FROM ( SELECT
		MEMBER_ID
		FROM FAVOR
		WHERE MEMBER_ID != #{member_id}
		AND
		FAVOR IN ( SELECT
		FAVOR
		FROM FAVOR
		WHERE MEMBER_ID=#{member_id}
		)
		GROUP BY
		MEMBER_ID ) F
		INNER JOIN MEMBER M ON F.MEMBER_ID = M.MEMBER_ID
	</select>
	
	<select id="favor" resultType="cloud.member.FavorVO">
	select favor from favor where member_id=#{member_id}
	</select>
	
	<insert id="addAlarm">
		insert into Alarm (member_id, alarm_content, alarm_time) values (#{member_id}, #{alarm_content}, #{alarm_time})
	</insert>
	
	<select id="viewAlarm" resultType="cloud.member.AlarmVO">
		select alarm_content, alarm_time from alarm where member_id = #{member_id}
	</select>
	
	<delete id="deleteAlarm">
		delete alarm where member_id = #{member_id}
	</delete>
</mapper>