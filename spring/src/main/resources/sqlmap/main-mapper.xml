<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="main">
	<select id="detail" resultType="cloud.member.MemberVO">
		select * from member where
		member_id = #{member_id}
	</select>

	<update id="changeProfile">
		update member set member_profileimg =
		#{member_profileimg} where member_id = #{member_id}
	</update>
	<select id="check" resultType="cloud.member.MemberVO">
		select * from member where
		member_id = #{member_id}
	</select>
	<select id="viewpager" resultType="cloud.member.MemberVO">
		SELECT M.*
		FROM ( SELECT
		MEMBER_ID
		FROM FAVOR
		WHERE MEMBER_ID != #{member_id}
		AND
		FAVOR IN ( SELECT
		FAVOR
		FROM FAVOR
		WHERE MEMBER_ID=#{member_id}
		)
		GROUP BY
		MEMBER_ID ) F
		INNER JOIN MEMBER M ON F.MEMBER_ID = M.MEMBER_ID
	</select>

	<select id="favor" resultType="cloud.member.FavorVO">
		select favor from favor where
		member_id=#{member_id}
	</select>

	<insert id="addAlarm">
		insert into Alarm (member_id, alarm_content,
		alarm_time, receive_id) values (#{member_id}, #{alarm_content},
		#{alarm_time}, #{receive_id})
	</insert>

	<select id="viewAlarm" resultType="cloud.member.AlarmVO">
		select * from alarm where
		receive_id = #{receive_id}
	</select>

	<delete id="deleteAlarm">
		delete alarm where receive_id = #{receive_id}
	</delete>

	<delete id="deleteOneAlarm">
		delete alarm where alarm_id = #{alarm_id}
	</delete>

	<insert id="addFriend">
		into friend_list(MEMBER_ID, FRIEND_ID) values (#{member_id}, #{friend_id})
		into friend_list(MEMBER_ID, FRIEND_ID) values (#{friend_id},
		#{member_id})
		select * from dual;
	</insert>

	<select id="viewFriendList" resultType="cloud.member.FriendVO">
		select * from friend_list
		where member_id = #{member_id}
	</select>

	<select id="friendDetail" resultType="cloud.member.MemberVO">
		select * from member where
		member_id = #{member_id}
	</select>
</mapper>